DROP SCHEMA IF EXISTS vacationschema cascade;
CREATE SCHEMA vacationschema;
SET search_path TO vacationschema, public;

-- A property

CREATE TABLE Property (
	property_id integer PRIMARY KEY,
	num_bed integer NOT NULL,
	num_bath integer NOT NULL,
	capacity integer NOT NULL CHECK (capacity >= num_bed),
	address varchar(120) NOT NULL,	
	hottub BOOLEAN default false,
	sauna BOOLEAN default false,
	laundry BOOLEAN default false,
	cleaning BOOLEAN default false,
	breakfast BOOLEAN default false,
	concierge BOOLEAN default false);

-- City property data

CREATE TABLE City(
	property_id integer REFERENCES Property(property_id),
	walk integer NOT NULL,
	transit varchar(6) NOT NULL
	);

-- Water property data
CREATE TABLE Water(
	property_id integer REFERENCES Property(property_id),
	beach BOOLEAN default false,
	lake BOOLEAN default false,
	pool BOOLEAN default false,
	beachl BOOLEAN default false,
	lakel BOOLEAN default false,
	pooll BOOLEAN default false
	);


-- A guest
CREATE TABLE Guest(
	guest_id SERIAL PRIMARY KEY,
	name varchar(80) NOT NULL,
	dob DATE NOT NULL,
	host INT NOT NULL,
	name varchar(50) NOT NULL,
	address varchar(50) NOT NULL
	);

-- Host Information
CREATE TABLE Host(
	host_id INT PRIMARY KEY REFERENCES Guest(guest_id),
	host_name varchar(80) NOT NULL,
	host_email varchar(80) NOT NULL,
	creditcard INT NOT NULL
	);
	
-- Rent information on a weekly basis
CREATE TABLE Rent(
	rental_id INT PRIMARY KEY,
	property_id INT NOT NULL REFERENCES Property(property_id),
	host_id INT NOT NULL REFERENCES Guest(guest_id),
	price DECIMAL(19,4)
	);

-- Property Ratings
CREATE TABLE Property_Rating(
	rating_id integer SERIAL PRIMARY KEY,
	property_id integer REFERENCES Property(property_id),
	guest_id integer REFERENCES Guest(guest_id),
	guest_name varchar(80) REFERENCES Guest(name),
	rating INTEGER NOT NULL
	);

-- Host Ratings
CREATE TABLE Host_Rating(
	rating_id integer SERIAL PRIMARY KEY,
	host_id integer REFERENCES Host(host_id),
	guest_id integer REFERENCES Guest(guest_id),
	rating INTEGER NOT NULL
	);
	




